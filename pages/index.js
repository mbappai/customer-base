import Head from 'next/head'
import {useState} from 'react'
import styles from '../styles/Home.module.css'
import {Button,Modal,Form,Input} from 'antd'
import 'antd/dist/antd.css';

export default function Home() {

  const [isModalOpen,setIsModalOpen] = useState(false);
  const [customerList, setCustomerList] =  useState([]);

  function toggleModal(){
    setIsModalOpen(!isModalOpen);
  }

  function handleSubmitCustomer(customerData){
    console.log(customerData)

    // save to database
    // save to local state
    // close modal
    toggleModal();
  }

  return (
    <div className={styles.container}>
      <Head>
        <title>Create Next App</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>

      <main className={styles.main}>
       <Button onClick={toggleModal}>Create customer</Button>
        <CustomerModal isModalOpen={isModalOpen} onToggleModal={toggleModal} handleSubmitCustomer={handleSubmitCustomer}/>
      </main>
    </div>
  )
}

function CustomerModal({isModalOpen,onToggleModal,handleSubmitCustomer}){
  return(
    <Modal
    title="Create a new customer"
    centered
    visible={isModalOpen}
    onOk={onToggleModal}
    onCancel={onToggleModal}
    footer={null}
    // width={1000}
  >
    <ModalForm onSubmitCustomer={handleSubmitCustomer}/>
  </Modal>
  )
}


function ModalForm({onSubmitCustomer}){
  return(
    <Form
      layout='vertical'
      name="customerForm"
      initialValues={{ remember: true }}
      onFinish={onSubmitCustomer}
      autoComplete="off"
    >
      <Form.Item
        label="customerName"
        name="Customer Name"
        rules={[{ required: true, message: 'Please input name of customer!' }]}
      >
        <Input />
      </Form.Item>

      <Form.Item
        name="phone"
        label="Phone Number"
        rules={[{ required: true, message: 'Please input customer phone number!' }]}
      >
        <Input addonBefore={'+234'} style={{ width: '100%' }} />
      </Form.Item>


      <Form.Item wrapperCol={{ offset: 8, span: 16 }}>
        <Button type="primary" htmlType="submit">
          Submit
        </Button>
      </Form.Item>
    </Form>
  )
}